
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VAAZHA Bot Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root {
            --vaazha-green: #43b581;
            --vaazha-dark: #2f3136;
            --vaazha-gray: #36393f;
            --vaazha-light: #40444b;
        }
        
        body {
            background-color: var(--vaazha-dark);
            color: white;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .navbar {
            background-color: var(--vaazha-gray) !important;
        }
        
        .navbar-brand {
            color: var(--vaazha-green) !important;
            font-weight: bold;
        }
        
        .card {
            background-color: var(--vaazha-light);
            border: none;
            color: white;
        }
        
        .card-header {
            background-color: var(--vaazha-gray);
            border-bottom: 2px solid var(--vaazha-green);
        }
        
        .btn-primary {
            background-color: var(--vaazha-green);
            border-color: var(--vaazha-green);
        }
        
        .btn-primary:hover {
            background-color: #3ca374;
            border-color: #3ca374;
        }
        
        .stat-card {
            transition: transform 0.2s;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
        }
        
        .server-selector {
            background-color: var(--vaazha-light);
            border: 1px solid var(--vaazha-green);
            color: white;
        }
        
        .server-selector:focus {
            background-color: var(--vaazha-light);
            border-color: var(--vaazha-green);
            color: white;
            box-shadow: 0 0 0 0.2rem rgba(67, 181, 129, 0.25);
        }
        
        .sidebar {
            background-color: var(--vaazha-gray);
            min-height: calc(100vh - 56px);
        }
        
        .sidebar .nav-link {
            color: #b9bbbe;
            padding: 12px 20px;
            border-radius: 8px;
            margin: 4px 0;
        }
        
        .sidebar .nav-link:hover, .sidebar .nav-link.active {
            background-color: var(--vaazha-green);
            color: white;
        }
        
        .content-area {
            background-color: var(--vaazha-dark);
            min-height: calc(100vh - 56px);
            padding: 20px;
        }
        
        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
        }
        
        .status-online { color: #43b581; }
        .status-offline { color: #f04747; }
        .status-idle { color: #faa61a; }
        
        .metric-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--vaazha-green);
        }
        
        .coconut-emoji {
            font-size: 1.5rem;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">
                ðŸŒ´ VAAZHA Bot Dashboard
            </a>
            
            {% if servers %}
            <div class="d-flex align-items-center">
                <select class="form-select server-selector me-3" id="serverSelector" onchange="switchServer()">
                    <option value="">Select Server...</option>
                    {% for server in servers %}
                    <option value="{{ server.id }}" {% if selected_server == server.id %}selected{% endif %}>
                        {{ server.name }} ({{ server.member_count }} members)
                    </option>
                    {% endfor %}
                </select>
            </div>
            {% endif %}
            
            <div class="navbar-nav">
                <span class="navbar-text">
                    <i class="fas fa-circle status-online"></i> Dashboard Online
                </span>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            {% block sidebar %}
            <nav class="col-md-2 d-md-block sidebar">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link" href="/">
                                <i class="fas fa-home"></i> Overview
                            </a>
                        </li>
                        {% if selected_server %}
                        <li class="nav-item">
                            <a class="nav-link" href="#users" onclick="showSection('users')">
                                <i class="fas fa-users"></i> User Management
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#economy" onclick="showSection('economy')">
                                <i class="fas fa-coins"></i> Economy System
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#karma" onclick="showSection('karma')">
                                <i class="fas fa-star"></i> Karma System
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#moderation" onclick="showSection('moderation')">
                                <i class="fas fa-shield-alt"></i> Moderation
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#config" onclick="showSection('config')">
                                <i class="fas fa-cog"></i> Configuration
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#logs" onclick="showSection('logs')">
                                <i class="fas fa-file-alt"></i> Logs & Analytics
                            </a>
                        </li>
                        {% endif %}
                    </ul>
                </div>
            </nav>
            {% endblock %}

            <main class="col-md-10 ms-sm-auto content-area">
                {% block content %}{% endblock %}
            </main>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        function switchServer() {
            const selector = document.getElementById('serverSelector');
            if (selector.value) {
                window.location.href = '/server/' + selector.value;
            }
        }
        
        function showSection(sectionName) {
            // Hide all sections
            const sections = document.querySelectorAll('.dashboard-section');
            sections.forEach(section => section.style.display = 'none');
            
            // Show selected section
            const targetSection = document.getElementById(sectionName + '-section');
            if (targetSection) {
                targetSection.style.display = 'block';
            }
            
            // Update active nav
            const navLinks = document.querySelectorAll('.sidebar .nav-link');
            navLinks.forEach(link => link.classList.remove('active'));
            
            const activeLink = document.querySelector(`[href="#${sectionName}"]`);
            if (activeLink) {
                activeLink.classList.add('active');
            }
        }
        
        // Auto-refresh stats every 30 seconds
        setInterval(() => {
            if (typeof refreshStats === 'function') {
                refreshStats();
            }
        }, 30000);
    </script>
    
    {% block scripts %}{% endblock %}
</body>
</html>
